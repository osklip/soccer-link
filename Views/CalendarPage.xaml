<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SoccerLink.Views.CalendarPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:SoccerLink.Models"
    mc:Ignorable="d">

    <Grid Background="#405861" Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Spacing="12" Margin="0,0,0,20">
            <Button x:Name="BackButton" 
                    Content="⟵ Powrót" 
                    Click="BackButton_Click" 
                    HorizontalAlignment="Left"
                    Background="Transparent"
                    BorderThickness="0"
                    FontSize="18"
                    Foreground="#CDE6F8"
                    FontWeight="SemiBold" />

            <Grid>
                <TextBlock Text="Kalendarz i Wydarzenia Tygodnia" 
                           FontSize="24" 
                           FontWeight="Bold"
                           Foreground="#E6F6FF"
                           VerticalAlignment="Center"/>

                <Button x:Name="AddEventButton"
                        Content="+ Dodaj Wydarzenie"
                        Click="AddEventButton_Click"
                        Background="#86A9C8"
                        Foreground="#2F4450"
                        FontWeight="Bold"
                        CornerRadius="8"
                        Padding="16,8"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center" />
            </Grid>
        </StackPanel>

        <Border Grid.Row="1"
            Background="#32404A"
            CornerRadius="10"
            BorderBrush="#9ECBFF"
            BorderThickness="3"
            Padding="12">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="15" Margin="0,0,0,15">
                    <Button x:Name="PrevWeekButton" 
                            Content="⟵ Poprzedni tydzień" 
                            Click="PrevWeekButton_Click"
                            Background="#8A9AA6"
                            Foreground="#2F4450"
                            FontWeight="Bold"
                            CornerRadius="6" />

                    <TextBlock x:Name="WeekRangeTextBlock"
                               Text="Ładowanie..."
                               VerticalAlignment="Center"
                               Foreground="#E6F6FF"
                               FontWeight="SemiBold"
                               FontSize="16" />

                    <Button x:Name="NextWeekButton" 
                            Content="Następny tydzień ⟶" 
                            Click="NextWeekButton_Click"
                            Background="#8A9AA6"
                            Foreground="#2F4450"
                            FontWeight="Bold"
                            CornerRadius="6" />
                </StackPanel>


                <ListView Grid.Row="1" 
                          x:Name="EventsListView" 
                          SelectionMode="None" 
                          Background="Transparent"
                          BorderThickness="0">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="models:UpcomingEvent">
                            <Grid Margin="0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="8" CornerRadius="4" 
                                        Background="{x:Bind EventStyle, Mode=OneWay}" 
                                        Margin="0,0,15,0"/>

                                <StackPanel Grid.Column="1" Spacing="2">
                                    <TextBlock Text="{x:Bind Title}" FontWeight="Bold" FontSize="16" TextWrapping="Wrap" Foreground="#E6F6FF"/>

                                    <StackPanel Orientation="Horizontal" Spacing="10">
                                        <TextBlock Text="{x:Bind EventType}" FontWeight="SemiBold" FontSize="13" Foreground="#86A9C8"/>
                                        <TextBlock Text="•" Foreground="#86A9C8"/>
                                        <TextBlock Text="{x:Bind DisplayDate}" FontSize="13" Foreground="#CDE6F8"/>
                                        <TextBlock Text="{x:Bind DisplayTimeRange}" FontSize="13" Foreground="#CDE6F8"/>
                                    </StackPanel>

                                    <StackPanel Orientation="Horizontal" Spacing="10" Opacity="0.8">
                                        <TextBlock Text="{x:Bind Location}" FontSize="12" FontStyle="Italic"/>
                                    </StackPanel>

                                    <TextBlock Text="{x:Bind Description}" 
                                               Margin="0,4,0,0" 
                                               Foreground="#BFBFBF" 
                                               TextWrapping="Wrap"
                                               FontSize="12"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="10" VerticalAlignment="Center" Margin="15,0,0,0">
                                    <Button Content="Edytuj" 
                                            Tag="{x:Bind Id}"
                                            Click="EditEventButton_Click"
                                            Background="#9ECBFF" 
                                            Foreground="#2F4450" 
                                            Padding="10,4" 
                                            CornerRadius="4"/>
                                    <Button Content="Usuń" 
                                            Tag="{x:Bind Id}"
                                            Click="DeleteEventButton_Click"
                                            Background="#C0392B" 
                                            Foreground="White" 
                                            Padding="10,4" 
                                            CornerRadius="4"/>
                                </StackPanel>

                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

                <TextBlock x:Name="StatusTextBlock" 
                           Grid.Row="1"
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center" 
                           Foreground="#CDE6F8" 
                           Visibility="Collapsed"/>
            </Grid>
        </Border>
    </Grid>
</Page>